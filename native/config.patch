--- duktape-android/duktape/src/main/jni/duktape/duk_config.h
+++ duk_config.h
@@ -1648,7 +1648,6 @@
 #define DUK_USE_FAST_REFCOUNT_DEFAULT
 #define DUK_USE_HEX_FASTPATH
 #define DUK_USE_IDCHAR_FASTPATH
-#undef DUK_USE_INTERRUPT_COUNTER
 #define DUK_USE_JSON_DECNUMBER_FASTPATH
 #define DUK_USE_JSON_DECSTRING_FASTPATH
 #define DUK_USE_JSON_EATWHITE_FASTPATH
@@ -1661,6 +1660,13 @@
 #undef DUK_USE_STRHASH_DENSE
 #define DUK_USE_STRHASH_SKIP_SHIFT 5
 #define DUK_USE_VALSTACK_UNSAFE
+
+extern duk_bool_t duk_interrupted;
+static duk_bool_t check_exec_timeout(void *udata) {
+    return duk_interrupted;
+}
+#define DUK_USE_EXEC_TIMEOUT_CHECK check_exec_timeout
+#define DUK_USE_INTERRUPT_COUNTER

 /*
  *  Autogenerated defaults
@@ -1732,7 +1738,6 @@
 #undef DUK_USE_EXEC_INDIRECT_BOUND_CHECK
 #undef DUK_USE_EXEC_PREFER_SIZE
 #define DUK_USE_EXEC_REGCONST_OPTIMIZE
-#undef DUK_USE_EXEC_TIMEOUT_CHECK
 #undef DUK_USE_EXPLICIT_NULL_INIT
 #undef DUK_USE_EXTSTR_FREE
 #undef DUK_USE_EXTSTR_INTERN_CHECK

